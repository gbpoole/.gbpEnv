# Configure TravisCI (https://travis-ci.org) tests
language: generic

# Test on both Linux and OSX
os:
  - linux
  - osx

# The following lines are needed by Codecov
sudo: required
addons:
  apt:
    packages:
      - libcurl4-openssl-dev
      - libelf-dev
      - libdw-dev
      - cmake

# Make sure the home directory is set to 
# be the TravisCI project directory
env:
    HOME=${TRAVIS_BUILD_DIR}
	# Add Codecov token
	global:
		- CODECOV_TOKEN=:093d2255-106c-40f4-b3f9-5056c7935cd1

# All the tests will be run by this Makefile
#    using assert.sh
script: |
    make -f .test/Makefile test

# Add the following lines to generate Codecov report
after_success: |
    make -f .test/Makefile kcov_bash

